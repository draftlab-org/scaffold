---
import { getCollection } from 'astro:content';
import Button from '@components/atoms/Button.astro';
import Hero from '@components/organisms/Hero.astro';
import type { Person } from '@components/organisms/Person.astro';
import PeopleSection from '@components/sections/PeopleSection.astro';
import sections from '@content/sections.json';
import PageLayout from '@layouts/PageLayout.astro';

// Import all people images
const images = import.meta.glob<{ default: ImageMetadata }>(
  '/src/assets/people/*.png',
  { eager: true }
);

// Get all people from the collection
const peopleEntries = await getCollection('people');

// Map people data to include actual image imports
const people: Person[] = peopleEntries.map((entry) => ({
  ...entry.data,
  headshot: images[`/src/assets/people/${entry.data.headshot}`]?.default,
}));
---

<PageLayout
	title="About Us - DraftLab Scaffold"
	description="Meet the team behind DraftLab Scaffold"
>
	<!-- Hero Section -->
	<Hero
		title="About Us"
		subtitle="We are a group of people who don't exist really! We're just here to populate the website."
		size="default"
		background="white"
	>
		<p class="text-center">
			Thank you <Button
				type="button"
				as="a"
				href="https://www.dicebear.com"
				variant="primary"
				size="md">Dicebear</Button
			>
			<a href="">Dicebear</a> and <a href="https://www.openpeeps.com"
				>Open Peeps!</a
			>
		</p></Hero
	>
	<Button
		type="button"
		as="button"
		href="https://www.dicebear.com"
		variant="primary"
		size="md">Dicebear</Button
	>

	<!-- People Sections -->
	{
		sections.map((section) => (
			<PeopleSection people={people} section={section} />
		))
	}
</PageLayout>
