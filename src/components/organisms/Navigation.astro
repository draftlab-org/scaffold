---
import Link from '@components/atoms/Link.astro';
import NavItem from '@components/molecules/NavItem.astro';
import MobileMenu from '@components/organisms/MobileMenu';

export interface NavLink {
  href: string;
  label: string;
}

export interface Props {
  links: NavLink[];
  currentPath?: string;
  siteName?: string;
  class?: string;
}

const {
  links,
  currentPath = Astro.url.pathname,
  siteName = 'Draftlab Scaffold',
  class: className = '',
} = Astro.props;

const isActive = (href: string) => {
  if (href === '/') return currentPath === '/';
  return currentPath.startsWith(href);
};
---

<nav
	class={`p-6 w-full bg-white flex justify-between items-center ${className}`}
>
	<!-- Left side: Logo + Nav Links -->
	<div class="flex items-center gap-10">
		<!-- Logo/Site Name -->
		<div class="shrink-0">
			<Link
				href="/"
				variant="unstyled"
				class="font-serif text-2xl font-bold text-gray-900 underline decoration-primary-300 decoration-dotted decoration-4 underline-offset-8"
			>
				{siteName}
			</Link>
		</div>

		<!-- Navigation Links -->
		<div class="hidden md:flex items-center space-x-1">
			{
				links.map((link) => (
					<NavItem
						href={link.href}
						label={link.label}
						active={isActive(link.href)}
					/>
				))
			}
		</div>
	</div>

	<!-- Right side: Actions + Mobile Menu -->
	<div class="flex items-center gap-4">
		<!-- CTA or Actions Slot -->
		<slot name="actions" />

		<!-- Mobile Menu -->
		<div class="md:hidden">
			<MobileMenu client:load links={links} currentPath={currentPath} />
		</div>
	</div>
</nav>
