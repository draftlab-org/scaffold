---
import { getEntry } from 'astro:content';
import Button from '@components/atoms/Button.astro';
import Navigation from '@components/organisms/Navigation.astro';
import type { NavItem } from '@utils/navigation';
import { convertNavigationItems } from '@utils/navigation';
import IconGithub from '~icons/simple-icons/github';

// Fetch GitHub URL from site config
const siteConfig = await getEntry('site', 'config');
const githubUrl = siteConfig?.data.social?.github;

export interface Props {
  items: NavItem[];
  siteName?: string;
  transparent?: boolean;
  sticky?: boolean;
  class?: string;
}

const {
  items,
  siteName,
  transparent = false,
  sticky = false,
  class: className = '',
} = Astro.props;

const stickyClass = sticky ? 'sticky top-0 z-50' : '';
const transparentClass = transparent ? 'bg-transparent border-transparent' : '';
---

<header class={`${stickyClass} ${className}`}>
	<Navigation
		items={items}
		siteName={siteName}
		logo={siteConfig?.data.defaultLogoLight}
		class={transparentClass}
	>
		<div slot="actions" class="flex items-center gap-4">
			{
				githubUrl && (
					<Button variant="outline" as="a" size="square" href={githubUrl}>
						<>
							<IconGithub class="h-5 w-5" aria-label={githubUrl} />
							<span class="sr-only">{githubUrl}</span>
						</>
					</Button>
				)
			}
			<slot name="actions" />
		</div>
	</Navigation>
</header>
